Bookmarklet: Typogr
===================
This is a bookmarklet that uses components of [Typogr](https://github.com/ekalinin/typogr.js) to typographically enhance sites. All the actual work is done by functions copied straight from Typogr, so I suggest [checking it out](https://github.com/ekalinin/typogr.js)&mdash;it's great.

 The functions were extracted into the bookmarklet to not have to load the two script files (jQuery and Typogr) when running it, and because we only need these specific goodies.

 Usage
 -----

 Drag [this link](javascript:function(e,t){var%20n=/<(\/)?(pre|code|kbd|script|math|title)[^>]*>/i;var%20r=function(e,t){return%20new%20RegExp(e,t)};var%20i=function(e){var%20t=s(e),r=[],i=[],c="",h="",p=false,d="",v,m;t.forEach(function(e){if(e.type==="tag"){r.push(e.txt);if((h=n.exec(e.txt))!==null){c=h[2].toLowerCase();if(h[1]){if(i.length>0){if(c===i[i.length-1]){i.pop()}}if(i.length===0){p=false}}else{i.push(c);p=true}}}else{m=e.txt;v=m.slice(-1);if(!p){m=o(m);m=u(m);m=a(m);m=f(m);switch(m){case"'":if(/\S/.test(d)){m="&#8217;"}else{m="&#8216;"}break;case'"':if(/\S/.test(d)){m="&#8221;"}else{m="&#8220;"}break;default:m=l(m)}}d=v;r.push(m)}});return%20r.join("")};var%20s=function(e){var%20t=[],n=0,r=/([^<]*)(<[^>]*>)/gi,i;while((i=r.exec(e))!==null){var%20s=i[1],o=i[2];if(s){t.push({type:"text",txt:s})}t.push({type:"tag",txt:o});n=r.lastIndex}if(r.lastIndex<=e.length){if(e.slice(-1)=="."&&e.slice(-2)!=".."){t.push({type:"text",txt:e.slice(n,e.length-1)});t.push({type:"text",txt:e.slice(-1)})}else{t.push({type:"text",txt:e.slice(n)})}}return%20t};var%20o=function(e){return%20e.replace(/\\"/g,"&#34;").replace(/\\'/g,"&#39;").replace(/\\-/g,"&#45;").replace(/\\\./g,"&#46;").replace(/\\\\/g,"&#92;").replace(/\\`/g,"&#96;")};var%20u=function(e){return%20e.replace(/---/g,"&#8212;").replace(/--/g,"&#8211;")};var%20a=function(e){return%20e.replace(/\.\.\./g,"&#8230;").replace(/\.%20\.%20\./g,"&#8230;")};var%20f=function(e){return%20e.replace(/``/g,"&#8220;").replace(/''/g,"&#8221;")};var%20l=function(e){var%20t="[!\"#\\$\\%\\'()*+,-.\\/:;<=>?\\@\\[\\\\]\\^_`{|}~]",n="(?=%s\\B)".replace("%s",t),i="[^\\%20\\t\\r\\n\\[\\{\\(\\-]",s="&#8211;|&#8212;",o=r("("+"\\s|"+"&nbsp;|"+"--|"+"&[mn]dash;|"+s+"|"+"&#x201[34];"+")"+"'"+"(?=\\w)","g"),u=r("("+i+")"+"'"+"(?!\\s%20|%20s\\b%20|%20\\d)","g"),a=r("("+i+")"+"'"+"(?!\\s%20|%20s\\b)","g"),f=r("("+"\\s|"+"&nbsp;|"+"--|"+"&[mn]dash;|"+s+"|"+"&#x201[34];"+")"+'"'+"(?=\\w)","g"),l=r('"(?=\\s)',"g"),c=r("("+i+')"',"g");return%20e.replace(r("^'%s".replace("%s",n),"g"),"&#8217;").replace(r('^"%s'.replace("%s",n),"g"),"&#8221;").replace(/"'(?=\w)/g,"&#8220;&#8216;").replace(/'"(?=\w)/g,"&#8216;&#8220;").replace(/\b'(?=\d{2}s)/g,"&#8217;").replace(o,"$1&#8216;").replace(u,"$1&#8217;").replace(a,"$1&#8217;$2").replace("'","&#8216;").replace(f,"$1&#8220;").replace(l,"&#8221;").replace(c,"$1&#8221;").replace('"',"&#8220;")};t.body.innerHTML=i(t.body.innerHTML);alert("Dear%20Sir,%20I%20have%20typogrified.%20It%20was%20a%20great%20success.")}(window,document)) into your bookmarks.

 Alternatively, you may create your own bookmarklet from `bookmarklet.js`.